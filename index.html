<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Georgia", serif; }
        
        body {
            height: 100vh;
            background: radial-gradient(circle at top, #ff9a9e, #fad0c4);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        /* --- PROPOSAL CARD --- */
        #proposal-section {
            text-align: center;
            z-index: 20;
            transition: opacity 0.8s ease;
            position: absolute;
        }

        .proposal-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* The GIF Image Container */
        .gif-container {
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .gif-container img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
        }

        h1 { color: #ff5f6d; margin-bottom: 25px; font-size: 26px; line-height: 1.4; }
        
        .btn-group {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
            position: relative;
            height: 50px; /* Reserve space for buttons */
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
        }

        #yes-btn { background: #ff5f6d; color: white; box-shadow: 0 4px 10px rgba(255, 95, 109, 0.4); }
        #yes-btn:hover { transform: scale(1.05); }

        #no-btn { background: #eee; color: #666; position: absolute; left: 60%; }

        /* --- BOOK SECTION (Hidden initially) --- */
        #book-wrapper {
            display: none; /* Hidden by default */
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 10;
        }

        .book { width: 340px; height: 480px; perspective: 1500px; position: relative; }

        .page {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(145deg, #ff5f6d, #ffc371);
            border-radius: 18px; box-shadow: 0 15px 40px rgba(0,0,0,0.25);
            transform-origin: left; transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
            padding: 22px; color: #fff;
        }

        .page.flipped { transform: rotateY(-180deg); }
        .page-content { backface-visibility: hidden; height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center; }
        
        .nav-btns { display: flex; gap: 20px; }
        .next, .back { font-size: 26px; cursor: pointer; animation: bounce 1.5s infinite; user-select: none; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(6px); } }

        .gif-box { background: rgba(255,255,255,0.25); padding: 8px; border-radius: 14px; width: 100%; }
        .gif-box img { width: 100%; border-radius: 12px; }

        /* Floating Hearts Background */
        .heart { position: absolute; bottom: -20px; color: rgba(255,255,255,0.8); animation: floatUp linear infinite; pointer-events: none; z-index: 0;}
        @keyframes floatUp { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-120vh); opacity: 0; } }

        /* Lock Overlay */
        .lock-overlay {
            position: absolute; inset: 0; background: #ff758c; border-radius: 18px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10;
        }
        .lock-overlay.hidden { display: none; }
        .lock-input { border: none; border-radius: 10px; padding: 10px; margin-bottom: 10px; text-align: center; width: 60%; }
        .lock-error { color: white; font-size: 12px; margin-top: 5px; display: none; }

    </style>
</head>
<body>

    <div id="proposal-section">
        <div class="proposal-card">
            <div class="gif-container">
                <img id="proposal-gif" src="https://media.tenor.com/ecMcHeDqY1SAAAAC/bubu-dudu-flower.gif" alt="Bubu Dudu">
            </div>
            
            <h1 id="proposal-text">Will you be my Valentine?</h1>
            
            <div class="btn-group">
                <button id="yes-btn">YES! ‚ù§Ô∏è</button>
                <button id="no-btn">No</button>
            </div>
        </div>
    </div>

    <div id="book-wrapper">
        <div class="book">
            <div class="page" style="z-index: 5;">
                <div class="lock-overlay" id="lock">
                    <p style="margin-bottom:10px">Enter the secret password:</p>
                    <input type="password" id="lockInput" class="lock-input" placeholder="Hint: L_ _ E">
                    <button id="unlockBtn" style="background:white; color:#ff5f6d; padding: 5px 15px; border:none; border-radius:15px; cursor:pointer;">Unlock</button>
                    <div class="lock-error" id="lockError">Wrong password üíî</div>
                </div>
                <div class="page-content">
                    <h2>You said YES! üåπ</h2>
                    <p>My heart beat so fast waiting for your answer.<br>Now, let me show you something special...</p>
                    <div class="next">‚û°Ô∏è</div>
                </div>
            </div>

            <div class="page" style="z-index: 4;">
                <div class="page-content">
                    <h2>Best Decision ü´†</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/hmYv6-dCkGgAAAAi/bubu-dudu-bubu.gif"></div>
                    <p>Loving you was the best thing I ever did.<br>You are my comfort place. üêª</p>
                    <div class="nav-btns"><div class="back">‚¨ÖÔ∏è</div><div class="next">‚û°Ô∏è</div></div>
                </div>
            </div>

            <div class="page" style="z-index: 3;">
                <div class="page-content">
                    <h2>My Firebrigade üöí</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/0BlLAI6vIhoAAAAi/tkthao219-bubududu.gif"></div>
                    <p>Sorry if I ever make you mad.<br>I promise to always make it up to you!</p>
                    <div class="nav-btns"><div class="back">‚¨ÖÔ∏è</div><div class="next">‚û°Ô∏è</div></div>
                </div>
            </div>

            <div class="page" style="z-index: 2;">
                <div class="page-content">
                    <h2>Manifesting Us ‚ú®</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/5T9NoewNL9EAAAAi/bubu-dudu.gif"></div>
                    <p>I dream of our future together.<br>Every step of the way, just you and me.</p>
                    <div class="nav-btns"><div class="back">‚¨ÖÔ∏è</div><div class="next">‚û°Ô∏è</div></div>
                </div>
            </div>

            <div class="page" style="z-index: 1;">
                <div class="page-content" style="justify-content: flex-start;">
                    <h2>Forever Yours ‚ù§Ô∏è</h2>
                    <p style="text-align: justify; font-size: 13px; margin-top: 20px;">
                        Lost the moment I saw those beautiful brown eyes... that "love at first sight" feeling was real.<br><br>
                        I look for you in every dream. I might be irritating sometimes, but I love you more than you could ever imagine.<br><br>
                        Happy Valentine's Day! üåπ
                    </p>
                    <div class="back" style="margin-top: auto;">‚¨ÖÔ∏è Start Over</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. PROPOSAL LOGIC ---
        const gifImg = document.getElementById('proposal-gif');
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        const proposalText = document.getElementById('proposal-text');
        
        // GIF URLs (Direct Links)
        const gifNormal = "https://media.tenor.com/ecMcHeDqY1SAAAAC/bubu-dudu-flower.gif";
        const gifAngry = "https://media.tenor.com/cGV5OMz9NaAAAAAC/bubu-dudu-angry.gif"; 
        const gifSad = "https://media.tenor.com/cFUxnfAGL3OAAAAC/bubu-dudu-sad.gif";
        const gifHappy = "https://media.tenor.com/Of1iZ9QyAswAAAAC/bubu-dudu-kiss.gif"; // A working happy/kissing gif

        let noCount = 0;

        // "No" Button Interaction
        function runAway() {
            // Move button randomly
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 50);
            noBtn.style.position = 'fixed';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
            
            noCount++;
            
            // Logic: 1st time -> Angry, 2nd time+ -> Sad
            if (noCount === 1) {
                gifImg.src = gifAngry;
                proposalText.innerHTML = "Hey! Don't press that! üò†";
            } else if (noCount > 1) {
                gifImg.src = gifSad;
                proposalText.innerHTML = "You're breaking my heart... üò¢";
            }
        }

        noBtn.addEventListener('mouseover', runAway);
        noBtn.addEventListener('click', runAway); // In case she manages to click it on mobile

        // "Yes" Button Interaction
        yesBtn.addEventListener('click', () => {
            // 1. Change to Happy GIF
            gifImg.src = gifHappy;
            proposalText.innerHTML = "YAY! I love you! ‚ù§Ô∏è";
            
            // 2. Confetti Explosion
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });

            // 3. Wait 2 seconds so she sees the happy gif, then show book
            setTimeout(() => {
                document.getElementById('proposal-section').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('proposal-section').style.display = 'none';
                    const book = document.getElementById('book-wrapper');
                    book.style.display = 'block';
                    setTimeout(() => book.style.opacity = '1', 50);
                }, 800);
            }, 2500); // 2.5 seconds delay
        });


        // --- 2. BOOK LOGIC ---
        
        // Page Flip
        document.querySelectorAll(".page").forEach((page, index) => {
            const next = page.querySelector(".next");
            const back = page.querySelector(".back");
            
            if (next) next.onclick = () => page.classList.add("flipped");
            if (back) {
                back.onclick = () => {
                    if (index === 4) { // Last page reset
                        document.querySelectorAll(".page").forEach(p => p.classList.remove("flipped"));
                    } else {
                        document.querySelectorAll(".page")[index - 1].classList.remove("flipped");
                    }
                };
            }
        });

        // Password Unlock
        document.getElementById('unlockBtn').onclick = () => {
            const pass = document.getElementById('lockInput').value.toUpperCase();
            if(pass === "LOVE") {
                document.getElementById('lock').classList.add('hidden');
            } else {
                const err = document.getElementById("lockError");
                err.style.display = "block";
                document.getElementById("lock").style.animation = "shake 0.4s";
                setTimeout(() => document.getElementById("lock").style.animation = "", 400);
            }
        };

        // Background Hearts
        function createHeart() {
            const heart = document.createElement("div");
            heart.className = "heart";
            heart.textContent = "‚ù§";
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.fontSize = (10 + Math.random() * 20) + "px";
            heart.style.animationDuration = (3 + Math.random() * 3) + "s";
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }
        setInterval(createHeart, 300);

        // Preload Images (to prevent lag when switching)
        new Image().src = gifAngry;
        new Image().src = gifSad;
        new Image().src = gifHappy;

    </script>
</body>
</html>
